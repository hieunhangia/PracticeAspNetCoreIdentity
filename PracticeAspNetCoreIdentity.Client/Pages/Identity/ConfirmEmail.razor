@attribute [Route(Constants.Route.ConfirmEmail)]

@switch (success)
{
    case null:
        <p>Confirming your email...</p>
        break;
    case true:
        <p>Your email has been confirmed successfully! <a href="@Constants.Route.Home">Home page</a>.</p>
        break;
    default:
        <p>There was an error confirming your email. Please try again or contact support.</p>
        break;
}


@inject IAccountManagement AccountManagement

@code {

    [SupplyParameterFromQuery] public string? UserId { get; set; }

    [SupplyParameterFromQuery] public string? Code { get; set; }

    private bool? success;

    protected override async Task OnInitializedAsync()
    {
        if (string.IsNullOrEmpty(UserId) || string.IsNullOrEmpty(Code))
        {
            success = false;
            return;
        }

        var result = await AccountManagement.ConfirmEmailAsync(UserId, Code);
        success = result.Succeeded;
    }

}